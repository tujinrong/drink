@{
    Layout = "";
}

<!--[if IE 9]>

<link rel="stylesheet" href="/SMAT.UI/Styles/bootstrap.css" type="text/css" />

<link rel="stylesheet" href="/SMAT.UI/Styles/asmat.common.animate.css" type="text/css" />
<link rel="stylesheet" href="/SMAT.UI/Styles/asmat.common.icon.css" type="text/css" />
<link rel="stylesheet" href="/SMAT.UI/Styles/asmat.common-material.min.css" type="text/css">
<link rel="stylesheet" href="/SMAT.UI/Styles/asmat.material.min.css" type="text/css">

<link rel="stylesheet" href="/SMAT.UI/Styles/asmat.app.css" type="text/css" />

<script src="/SMAT.UI/Scripts/jquery.min.js"></script>
<script src="/SMAT.UI/Scripts/jquery.ba-throttle-debounce.min.js"></script>
<script src="/SMAT.UI/Scripts/js/jquery.linq.min.js"></script>

<script src="/SMAT.UI/Scripts/js/bootstrap.js"></script>

<script src="/SMAT.UI/Scripts/js/asmat.app.js"></script>
<script src="/SMAT.UI/Scripts/js/slimscroll/jquery.slimscroll.min.js"></script>
<script src="/SMAT.UI/Scripts/js/asmat.app.plugin.js"></script>

<script src="/SMAT.UI/Scripts/asmat.all.min.js"></script>
<script src="/SMAT.UI/Scripts/smat.core.js"></script>
<script src="/SMAT.UI/Scripts/smat.service.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.Button.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.DatePicker.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.DateTimePicker.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.DropDownList.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.Form.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.Grid.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.NumericTextBox.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.Refer.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.RadioButton.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.Pager.js"></script>
<script src="/SMAT.UI/Scripts/smat.ui.TextBox.js"></script>
<script src="/SMAT.UI/Scripts/cultures/smat.culture.ja.min.js"></script>
<script src="/Scripts/smat.config.js"></script>

<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/template/smat.dynamics.template.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/template/smat.dynamics.template.SimpleSearch.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.formList.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.designer.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.tools.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.tools.editer.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Page.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Section.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Form.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Field.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.ToolBar.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Button.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Grid.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Line.js"></script>
<script src="/SMAT.UI/Scripts/dynamics/smat.dynamics.controls.Pager.js"></script>
<link rel="stylesheet" href="/Content/Site.css" type="text/css" />
<style>
    .s-icon {
        margin-top:11px;
    }
</style>
<![endif]-->


<section class="scrollable wrapper" style="padding: 0 0 0 5px; max-height: 510px;min-height: 200px;">
    <section class="panel panel-default">
       @using (Html.Smat().BeginForm("referShopListForm", new { @class = "panel-body", style = "padding:5px 20px" }
            ).Actions(actions =>
                {
                    actions.Action("/Refer/ReferShopSearch").ActionBtn("btnSearchReferShopList").ResultHandler("referListPager");
                }
            ))
        {
            <div class="form-horizontal">
                <div class="row">
                    <div class="col-fix-2" style="width:480px;">
                        <div class="form-group">
                            <label class="input-s-sm control-label">条件</label>
                            <input type="hidden" name="shopTypeCD" value="@ViewBag.AllowShopType" />
                            @Html.Smat().TextBox("txtReferShopKey").Name("ShopKey").HtmlAttributes(new { @class = "form-control input-s", style = "width:290px;", placeholder = "" })
                            @Html.Smat().Button("btnSearchReferShopList").Content("検索").HtmlAttributes(new { @class = "btn-primary" })
                        </div>
                    </div>
                    <div class="col-fix-1" style="width:210px;">
                        <div class="text-right text-center-xs">
                            @Html.Smat().Pager("referListPager").DataHandler("referListGrid")
                        </div>
                    </div>
                </div>
            </div>
            <div class="line line-dashed b-b line-lg pull-in "></div>
            <div class="row">
                @(Html.Smat().Grid("referListGrid")
                .Scrollable()
                .HtmlAttributes(new { @style = "height:422px;" })
                      .Columns(columns =>
                      {
                          columns.Bound("ShopCD").Title("コード").Width("100px");
                          columns.Bound("ShopName").Title("名称");
                          columns.Bound("").Title("").Width("90px").HtmlAttributes(new { @class = "text-center " }
                            ).Actions(actions =>
                             {
                                 actions.Text("選択").Click(@"
                                function (dataItem) {
                                    smat.service.closeForm({
                                        contentId: 'referShopListForm',
                                        result: {
                                            selectedRows: dataItem
                                        }
                                    });

                                }");
                             });
                      })
                )
            </div>
       }
    </section>
    <script>
        $("#txtReferShopKey").keypress(function (e) {
            var key = e.which;
            if (key == 13) {
                $("#btnSearchReferShopList").click();
                return false;
            }
        });
        $(document).ready(function () {
            $("#btnSearchReferShopList").click();
        });
    </script>
</section>